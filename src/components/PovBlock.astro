---
// src/components/PovBlock.astro
// CSS-only infinite carousel - no JavaScript required

const povItems = [
  { top: 'DYNAMISM', bottom: 'DOGMA' },
  { top: 'PLAY', bottom: 'PROCEDURE' },
  { top: 'PROTOTYPE', bottom: 'POLISH' },
  { top: 'LOCAL', bottom: 'CLOUD' },
  { top: 'DEPTH', bottom: 'BREADTH' },
]

// Duplicate items for seamless infinite loop
const allItems = [...povItems, ...povItems]
---

<div
  id="pov-block-carousel"
  class="pov-block-container relative overflow-hidden"
>
  <ul class="carousel flex h-full gap-2.5">
    {
      allItems.map((item, index) => (
        <li
          class="carousel-item flex flex-col items-center justify-center px-3 py-2"
          aria-hidden={index >= povItems.length ? 'true' : undefined}
        >
          <span class="font-valkyrie-a-caps text-lg leading-tight text-center block">
            {item.top}
          </span>
          <div class="divider w-1/3 my-2" />
          <span class="font-valkyrie-a-caps text-lg leading-tight text-center block">
            {item.bottom}
          </span>
        </li>
      ))
    }
  </ul>
</div>

<style>
  .pov-block-container {
    width: 240px;
    height: 10rem;
  }

  .carousel {
    animation: scroll 16.5s ease-in-out infinite;
  }

  .pov-block-container:hover .carousel {
    animation-play-state: paused;
  }

  .carousel-item {
    width: 240px;
    flex-shrink: 0;
  }

  /* Font is applied via UnoCSS class 'font-valkyrie-a-caps' */
  .font-valkyrie-a-caps {
    font-family: 'Valkyrie B Caps', sans-serif;
  }

  /* Style the divider div */
  .carousel-item .divider {
    height: 1px;
    background-color: currentColor;
  }

  /* Ensure text is properly contained */
  .carousel-item span {
    max-width: 100%;
    word-wrap: break-word;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /*
   * Stepped animation: pause at each item, then move to next
   * 5 items Ã— (3s pause + 0.3s transition) = 16.5s total
   * Each item: 240px width + 10px gap = 250px
   */
  @keyframes scroll {
    0%, 18% { transform: translateX(0); }
    20%, 38% { transform: translateX(-250px); }
    40%, 58% { transform: translateX(-500px); }
    60%, 78% { transform: translateX(-750px); }
    80%, 98% { transform: translateX(-1000px); }
    100% { transform: translateX(-1250px); }
  }
</style>
